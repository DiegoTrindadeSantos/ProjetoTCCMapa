<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html" 
 	xmlns:f="http://java.sun.com/jsf/core" 
 	xmlns:p="http://primefaces.org/ui">
<h:head>
<meta charset="utf-8" />
<meta name="viewport"
	content="width=device-width, initial-scale=1.0" />


<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
<script src="http://calvinmetcalf.github.io/shapefile-js/dist/shp.js"></script>
<script src="http://calvinmetcalf.github.io/leaflet.shapefile/leaflet.shpfile.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.4.2/leaflet.draw.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.4.2/leaflet.draw.js"></script>

<style type="text/css">
/* Map */
#map {
	height: 400px;
	z-index: 1;
}

input {
	margin-top: 10px;
}
</style>

<style>
		h2,p {color: white;}
		.gitButton{
			padding:15px 30px;
			background-color: #47a230;
			text-decoration: none;
			font-weight: 900;
			color: white;
			text-transform:uppercase;
			transition: background-color .5s;
			border: none;
    		border-radius: 2px;
    		cursor: pointer;
		}
		.gitButton:hover {background-color: #1d7806}
		.gitButton:visited {color: white;}
		}
	</style>

</h:head>
<h:body>

	<script src="bundle.js"></script>
	<script src="index.js"></script>
	<script src="teste.geojson"></script>

	<h:form id="mapaForm" enctype="multipart/form-data">
	
	<div id="map"></div>

	<p:panel id="panel" header="Importação ShapeFile" style="margim-bottom:10px;">
		
		<h:outputLabel value="Escolha uma arquivo .zip que contenha o Shapefile" />		
		<p:fileUpload fileUploadListener="#{MapaMB.handleFileUpload}" proccess="this" mode="advanced" onstart="Add(PF('uploadWG'))" uploadLabel="Enviar" label="Adicionar"
                  update="messages" auto="true" allowTypes="/(\.|\/)(zip)$/" widgetVar="uploadWG" />
                  
        <p:remoteCommand name="recebeJson" process="@this" actionListener="#{MapaMB.recebeJson}" />
        <p:remoteCommand name="recebeJsonFormas" process="@this" actionListener="#{MapaMB.recebeJsonFormas}" />
        
        <p:commandButton action="#{MapaMB.buttonAction}" value="Carregar" update="messages"  />
    	<p:growl id="messages" showDetail="true" />
		<br />
		<span id="warning"></span>
	</p:panel>
	
		
		<script src="mapa.js"></script>
	</h:form>
</h:body>
</html>